<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UE Libertador BolÃ­var - Portal</title>
    <!-- CSS Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Iconos Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- NUESTRO CSS PERSONALIZADO -->
    <link rel="stylesheet" href="estilos.css?v=2.0">
    <!-- Manifiesto PWA -->
    <link rel="manifest" href="manifest.json">
</head>
<body>

    <!-- PANTALLA DE BIENVENIDA / LOGIN -->
    <div id="welcome-screen" class="welcome-overlay">
        <div class="welcome-card text-center">
            <img src="https://cdn-icons-png.flaticon.com/512/167/167707.png" width="80" class="mb-3">
            <h2 class="text-primary fw-bold">UE Libertador BolÃ­var</h2>
            <p class="text-muted">Portal de AutogestiÃ³n Escolar</p>
            <hr>
            <form id="loginForm" onsubmit="entrarAlSistema(event)">
                <div class="mb-3 text-start">
                    <label class="form-label">Nombre y Apellido</label>
                    <input type="text" id="userName" class="form-control" placeholder="Ej: Pedro PÃ©rez" required>
                </div>
                <div class="mb-3 text-start">
                    <label class="form-label">GÃ©nero (Para personalizar tu experiencia)</label>
                    <select id="userGender" class="form-select" required>
                        <option value="">Seleccione...</option>
                        <option value="M">Masculino</option>
                        <option value="F">Femenino</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary w-100 btn-lg rounded-pill shadow">INGRESAR AL PORTAL ðŸš€</button>
            </form>
            <p class="mt-3 small text-muted">Visitas totales: <span id="contadorVisitas">Cargando...</span></p>
        </div>
    </div>

    <!-- APLICACIÃ“N PRINCIPAL (Oculta al inicio) -->
    <div id="app-container" style="display: none;">
        
        <!-- Navbar Superior Personalizada -->
        <nav class="navbar navbar-light bg-white shadow-sm sticky-top px-3">
            <div class="d-flex align-items-center">
                <span class="navbar-brand mb-0 h1 fw-bold text-primary">UELB</span>
            </div>
            <div class="d-flex align-items-center bg-light rounded-pill px-3 py-1">
                <span id="userIcon" class="me-2 fs-5">ðŸ‘¤</span>
                <small class="fw-bold text-dark" id="displayUserName">Usuario</small>
            </div>
        </nav>

        <!-- MenÃº de NavegaciÃ³n Tipo App -->
        <div class="nav-scroller py-2 bg-primary text-white text-center">
            <button class="btn btn-nav active" onclick="nav('inicio')"><i class="bi bi-house"></i> Inicio</button>
            <button class="btn btn-nav" onclick="nav('noticias'); cargarNoticias()"><i class="bi bi-newspaper"></i> Noticias</button>
            <button class="btn btn-nav" onclick="nav('guias'); cargarGuias()"><i class="bi bi-journal-text"></i> GuÃ­as</button>
            <button class="btn btn-nav" onclick="nav('inscripcion')"><i class="bi bi-pencil-square"></i> Inscribir</button>
        </div>

        <div class="container py-4 main-content">
            
            <!-- VISTA INICIO -->
            <div id="view-inicio" class="section-view active-view">
                <div class="text-center py-5">
                    <h1 class="display-6 fw-bold text-primary">Â¡Hola, <span id="welcomeName">Estudiante</span>!</h1>
                    <p class="lead text-muted">Â¿QuÃ© deseas gestionar hoy en tu escuela?</p>
                </div>

                <div class="card shadow-sm mx-auto border-0" style="max-width: 500px;">
                    <div class="card-body p-4">
                        <h5 class="card-title text-center mb-4"><i class="bi bi-search text-warning"></i> Consulta de Estatus</h5>
                        <div class="input-group mb-3">
                            <input type="text" id="cedulaInput" class="form-control" placeholder="CÃ©dula escolar (V-...)">
                            <button class="btn btn-primary" onclick="consultarAlumno()">Buscar</button>
                        </div>
                        <div id="resAlumno"></div>
                    </div>
                </div>
            </div>

            <!-- VISTA NOTICIAS -->
            <div id="view-noticias" class="section-view" style="display:none">
                <h3 class="border-bottom pb-2 mb-3">ðŸ“° Cartelera Digital</h3>
                <div id="contenedorNoticias" class="row g-3">
                    <div class="text-center py-4"><div class="spinner-border text-primary"></div></div>
                </div>
            </div>

            <!-- VISTA GUIAS -->
            <div id="view-guias" class="section-view" style="display:none">
                <h3 class="border-bottom pb-2 mb-3">ðŸ“š Biblioteca Virtual</h3>
                <select id="filtroAno" class="form-select mb-4 shadow-sm" onchange="filtrarGuias()">
                    <option value="Todos">Ver todos los aÃ±os</option>
                    <option value="1er AÃ±o">1er AÃ±o</option>
                    <option value="2do AÃ±o">2do AÃ±o</option>
                    <option value="3er AÃ±o">3er AÃ±o</option>
                    <option value="4to AÃ±o">4to AÃ±o</option>
                    <option value="5to AÃ±o">5to AÃ±o</option>
                </select>
                <div id="contenedorGuias" class="row g-3"></div>
            </div>

            <!-- VISTA INSCRIPCION -->
            <div id="view-inscripcion" class="section-view" style="display:none">
                <div class="card shadow mx-auto border-0" style="max-width: 600px;">
                    <div class="card-header bg-primary text-white fw-bold">
                        ðŸ“‹ Planilla de Solicitud
                    </div>
                    <div class="card-body">
                        <form id="formInscripcion" onsubmit="enviarInscripcion(event)">
                            <div class="mb-3"><label>Estudiante</label><input type="text" name="nombre" class="form-control" required></div>
                            <div class="mb-3"><label>CÃ©dula</label><input type="text" name="cedula" class="form-control" required></div>
                            <div class="row">
                                <div class="col-6 mb-3"><label>Grado</label><select name="grado" class="form-select"><option>1er AÃ±o</option><option>2do AÃ±o</option><option>3er AÃ±o</option><option>4to AÃ±o</option><option>5to AÃ±o</option></select></div>
                                <div class="col-6 mb-3"><label>TelÃ©fono</label><input type="tel" name="telefono" class="form-control" required></div>
                            </div>
                            <button type="submit" id="btnEnviar" class="btn btn-warning w-100 fw-bold">ENVIAR DATOS</button>
                        </form>
                        <div id="avisoForm" class="mt-3"></div>
                    </div>
                </div>
            </div>

        </div> <!-- Fin Container -->
    </div> <!-- Fin App Container -->

    <!-- CHATBOT FLOTANTE -->
    <div id="chatbot-container" class="chatbot-closed">
        <div class="chat-header" onclick="toggleChat()">
            <span>ðŸ¤– Asistente UELB</span>
            <i class="bi bi-chevron-up" id="chatIcon"></i>
        </div>
        <div class="chat-body">
            <div class="chat-messages" id="chatMessages">
                <div class="bot-msg">Â¡Hola! Soy el asistente virtual. Â¿En quÃ© te ayudo?</div>
            </div>
            <div class="chat-options">
                <button onclick="chatAsk('requisitos')">Requisitos InscripciÃ³n</button>
                <button onclick="chatAsk('notas')">Â¿CÃ³mo ver notas?</button>
                <button onclick="chatAsk('ubicacion')">UbicaciÃ³n</button>
                <button onclick="chatAsk('contacto')">Contacto Directo</button>
            </div>
        </div>
    </div>

    <!-- LÃ“GICA JAVASCRIPT -->
    <script src="main.js?v=2.0"></script>
</body>
</html>
